(window["webpackJsonprlog-client-normal-js"]=window["webpackJsonprlog-client-normal-js"]||[]).push([[0],{160:function(e,n,t){e.exports=t(313)},165:function(e,n,t){},174:function(e,n){},176:function(e,n){},215:function(e,n){},216:function(e,n){},312:function(e,n,t){e.exports=t.p+"static/media/MyDoubleLucky.38372de1.jpeg"},313:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(148),o=t.n(i),l=(t(165),t(7)),c=t(8),u=t(10),s=t(9),d=t(11),p=t(1),g=t(2),f=t(24),m=t(39),h=t(16),b=t.n(h),v=t(95),x=t(27);function j(){var e=Object(p.a)(["\n    width: 265px;\n    height: 204px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    margin-left: 25px;\n    margin-right: 25px;\n    margin-top: 20px;\n    margin-bottom: 20px;\n    background:#dfe6e9;\n    box-shadow: 0px 0px 5px -1px rgba(0,0,0,0.63);\n    cursor: pointer;\n    transition:0.3s;\n    color:black;\n    \n    &:hover {\n        background:#f5f6fa;\n    }\n    text-decoration:none;\n"]);return j=function(){return e},e}var O=g.a.div(j()),y=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(f.b,{style:{textDecoration:"none"},to:"/post"},r.a.createElement(O,null,"create new log"))}}]),n}(r.a.Component),w=t(152),k=t.n(w),I=function(){var e=localStorage.getItem("jwt");return k.a.verify(e,"rlog").id};function E(){var e=Object(p.a)(["\n    color:",";\n    position:absolute;\n    bottom:10px;\n    right:10px;\n    /* z-index:2; */\n    font-size:11px;\n"]);return E=function(){return e},e}function $(){var e=Object(p.a)(["\n    color:",";\n    position:absolute;\n    bottom:10px;\n    left:10px;\n    z-index:1;\n    \n"]);return $=function(){return e},e}function C(){var e=Object(p.a)(["\n    color:",";\n    position:absolute;\n    top:10px;\n    left:36px;\n    opacity:0;\n    ",":hover & {\n        opacity:1;\n        z-index:3;\n    }\n"]);return C=function(){return e},e}function S(){var e=Object(p.a)(["\n    color:",";\n    position:absolute;\n    top:10px;\n    left:10px;\n    opacity:0;\n    ",":hover & {\n        opacity:1;\n        z-index:3;\n    }\n"]);return S=function(){return e},e}function L(){var e=Object(p.a)(["\n    max-width: 80%;\n    font-weight:600;\n    position: absolute;\n    color:",";\n"]);return L=function(){return e},e}function B(){var e=Object(p.a)(["\n    object-fit:cover;\n    width:100%;\n    height:100%;\n    ",":hover & {\n        opacity:0.7;\n    }  \n"]);return B=function(){return e},e}function P(){var e=Object(p.a)(["\noverflow:hidden;\nposition: relative;\nwidth: 265px;\nheight: 204px;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\nborder-radius: 4px;\nmargin-left: 25px;\nmargin-right: 25px;\nmargin-top: 20px;\nmargin-bottom: 20px;\nbackground:#dfe6e9;\nbox-shadow: 0px 0px 5px -1px rgba(0,0,0,0.63);\ncursor: pointer;\ntransition:0.3s;\ncolor:black;\n&:hover {\n    background:#f5f6fa;\n}\ntext-decoration:none;\n"]);return P=function(){return e},e}var A=g.a.div(P()),T=g.a.img(B(),A),q=g.a.div(L(),(function(e){return e.image?"white":"black"})),U=g.a.i(S(),(function(e){return e.image?"white":"black"}),A),D=g.a.i(C(),(function(e){return e.image?"white":"black"}),A),z=g.a.i($(),(function(e){return e.image?"white":"black"})),F=g.a.div(E(),(function(e){return e.image?"white":"black"})),M=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={myId:""},t.LogComponentClicked=function(){var e=t.props.id,n=new URLSearchParams(window.location.search).get("k");window.location.href=n?"/log/".concat(e,"?k=").concat(n):"/log/".concat(e)},t.editIconClicked=function(e){e.stopPropagation();var n=t.props.id;window.location.href="/edit/log/".concat(n)},t.trashIconClicked=function(e){e.stopPropagation();var n=t.props,a=n.id,r=n.turnOnModalByClickingTrashIcon,i=n.logIdToDeleteFunc;r(),i(a),console.log("".concat(a," trash icon clicked!"))},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setState({myId:I()})}},{key:"render",value:function(){var e=this.props,n=e.title,t=e.image,a=e.private2,i=e.year,o=e.month,l=e.day,c=e.userId,u=this.state.myId,s=this.trashIconClicked,d=this.LogComponentClicked,p=this.editIconClicked;return r.a.createElement(A,{onClick:d},u===c&&r.a.createElement(U,{image:t,onClick:s,className:"fas fa-trash-alt"}),u===c&&r.a.createElement(D,{onClick:p,image:t,className:"far fa-edit"}),r.a.createElement(F,{image:t},l," ",o," ",i),a&&r.a.createElement(z,{image:t,className:"fas fa-lock"}),t&&r.a.createElement(T,{src:t}),r.a.createElement(q,{image:t},n))}}]),n}(r.a.Component),_=t(15);function R(){var e=Object(p.a)(["\n    background: white;\n    border: 0;\n    font-size: 16px;\n    cursor: pointer;\n    margin-right: 10px;\n"]);return R=function(){return e},e}function N(){var e=Object(p.a)(["\n    display:flex;\n    position:absolute;\n    bottom:20px;\n"]);return N=function(){return e},e}function V(){var e=Object(p.a)(["\n    width: 80%;\n"]);return V=function(){return e},e}function G(){var e=Object(p.a)([""]);return G=function(){return e},e}function K(){var e=Object(p.a)(["\n    margin-top:50px;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    color:black;\n    width: 40%;\n    height: 40%;\n    background: white;\n    border-radius: 2px;\n    position: relative;\n"]);return K=function(){return e},e}function W(){var e=Object(p.a)(["\n    position:fixed;\n    top:0;\n    left:0;\n    width:100%;\n    height:100%;\n    background:rgba(0,0,0,0.5);\n    color:white;\n    display:flex;\n    justify-content:center;\n"]);return W=function(){return e},e}var H=g.a.div(W()),J=g.a.div(K()),Y=g.a.h2(G()),X=g.a.p(V()),Q=g.a.div(N()),Z=g.a.button(R()),ee=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.title,t=e.message,a=e.noButtonClicked,i=e.okayButtonClicked;return r.a.createElement(H,null,r.a.createElement(J,null,r.a.createElement(Y,null,n),r.a.createElement(X,null,t),r.a.createElement(Q,null,r.a.createElement(Z,{onClick:i},"Okay"),r.a.createElement(Z,{onClick:a},"No"))))}}]),n}(r.a.Component),ne=t(153),te=t.n(ne);function ae(){var e=Object(p.a)(["\n    position:fixed;\n    z-index:10;\n    top:0;\n    left:0;\n    width:100%;\n    height:100%;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    background:rgba(0,0,0,0.5);\n"]);return ae=function(){return e},e}var re=g.a.div(ae()),ie=function(){return r.a.createElement(re,null,r.a.createElement(te.a,{type:"Audio",color:"#d63031",height:100,width:100}))};function oe(){var e=Object(p.a)(["\n    /* width:80%;\n    display:flex; */\n    width: 88%;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    flex-wrap: wrap;\n    /* min-width: 1267px; */\n\n"]);return oe=function(){return e},e}function le(){var e=Object(p.a)(["\nquery MyLogs(\n    $userId:String!,\n    $page:Int!\n){\n    myLogs(userId:$userId,page:$page) {\n      id\n      title\n      image\n      private2\n      year\n      month\n      day\n      userId\n    }\n  }\n"]);return le=function(){return e},e}function ce(){var e=Object(p.a)(["\nmutation($logId:String!, $userId:String!) {\n    deleteALogV2(logId:$logId,userId:$userId) {\n      id\n      title\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=Object(p.a)(["\nquery($userId:String!){\n  getMyLogsLength(userId:$userId) {\n      length\n    }\n  }\n"]);return ue=function(){return e},e}function se(){var e=Object(p.a)(["\n  {\n    getAllPublicLogsLength{\n      length\n    }\n  }\n"]);return se=function(){return e},e}function de(){var e=Object(p.a)(["\n  query($page:Int!){\n    getAllPublicLogs(page:$page){\n        id\n        title\n        image\n        private2\n        year\n        month\n        day\n        userId\n    }\n  }\n"]);return de=function(){return e},e}var pe=Object(_.b)(de()),ge=Object(_.b)(se()),fe=Object(_.b)(ue()),me=Object(_.b)(ce()),he=Object(_.b)(le()),be=g.a.div(oe()),ve=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={logs:[],page:1,modal:!1,modalTitle:"",modalMessage:"",logIdToDelete:"",loadingComponent:!1,totalLogsLength:0,loading:!0,currentLogsLength:0},t.trackScrolling=Object(x.a)(b.a.mark((function e(){var n,a,r,i,o,l,c,u,s,d,p,g,f;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("logsContainer"),a=t.state,r=a.page,i=a.currentLogsLength,o=a.totalLogsLength,l=t.props.k,c=I(),!t.isBottom(n)){e.next=23;break}if(!(i<o)){e.next=23;break}if("public"!==l){e.next=16;break}return console.log("logs container bottom reached in public logs"),e.next=10,fi.query({query:pe,variables:{page:r}});case 10:u=e.sent,s=u.data.getAllPublicLogs,d=s.length,t.setState({logs:[].concat(Object(v.a)(t.state.logs),[s]),page:t.state.page+1,currentLogsLength:t.state.currentLogsLength+d}),e.next=23;break;case 16:return console.log("logs container bottom reached in private logs"),e.next=19,fi.query({query:he,variables:{userId:c,page:r}});case 19:p=e.sent,g=p.data.myLogs,f=p.data.myLogs.length,t.setState({logs:[].concat(Object(v.a)(t.state.logs),[g]),page:t.state.page+1,currentLogsLength:t.state.currentLogsLength+f});case 23:case"end":return e.stop()}}),e)}))),t.turnOnModalByClickingTrashIcon=function(){t.setState({modal:!0,modalTitle:"Caution",modalMessage:"If you delete this log, you will never retrieve this log. Are you sure delete this log?"})},t.okayButtonClicked=Object(x.a)(b.a.mark((function e(){var n,a,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("okay button clicked!"),t.setState({loadingComponent:!0}),n=t.state.logIdToDelete,a=I(),e.next=6,fi.mutate({mutation:me,variables:{logId:n,userId:a}});case 6:r=e.sent,i=t.state.logs.filter((function(e){return e.id!==n})),t.setState({logs:i}),console.log("response: ",r),t.setState({loadingComponent:!1,modal:!1,modalTitle:"",modalMessage:""});case 11:case"end":return e.stop()}}),e)}))),t.noButtonClicked=function(){console.log("no button clicked!"),t.setState({modal:!1,modalTitle:"",modalMessage:""})},t.logIdToDeleteFunc=function(e){t.setState({logIdToDelete:e})},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.trackScrolling)}},{key:"componentDidMount",value:function(){var e=Object(x.a)(b.a.mark((function e(){var n,t,a,r,i,o,l,c,u,s,d,p,g;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.addEventListener("scroll",this.trackScrolling),"public"!==this.props.k){e.next=17;break}return e.next=5,fi.query({query:ge});case 5:return n=e.sent,t=n.data.getAllPublicLogsLength.length,a=this.state.page,e.next=10,fi.query({query:pe,variables:{page:a}});case 10:r=e.sent,i=r.data.getAllPublicLogs,o=r.data.getAllPublicLogs.length,console.log("all public logs: ",i),this.setState({logs:i,page:this.state.page+1,totalLogsLength:t,loading:!1,currentLogsLength:o}),e.next=29;break;case 17:return l=I(),e.next=20,fi.query({query:fe,variables:{userId:l}});case 20:return c=e.sent,u=c.data.getMyLogsLength.length,s=this.state.page,e.next=25,fi.query({query:he,variables:{userId:l,page:s}});case 25:d=e.sent,p=d.data.myLogs,g=d.data.myLogs.length,this.setState({logs:p,page:this.state.page+1,totalLogsLength:u,loading:!1,currentLogsLength:g});case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,n=e.logs,t=e.modal,a=e.modalMessage,i=e.modalTitle,o=e.loadingComponent,l=e.loading,c=this.turnOnModalByClickingTrashIcon,u=this.okayButtonClicked,s=this.noButtonClicked,d=this.logIdToDeleteFunc,p=this.props.k;return l?"Loading....":r.a.createElement(be,{id:"logsContainer"},"public"!==p&&r.a.createElement(y,null),n.map((function(e,n){var t=e.id,a=e.title,i=e.image,o=e.private2,l=e.year,u=e.month,s=e.day,p=e.userId;return r.a.createElement(M,{userId:p,year:l,month:u,day:s,private2:o,logIdToDeleteFunc:d,turnOnModalByClickingTrashIcon:c,key:t,id:t,title:a,image:i})})),o&&r.a.createElement(ie,null),t&&r.a.createElement(ee,{okayButtonClicked:u,noButtonClicked:s,title:i,message:a}))}},{key:"isBottom",value:function(e){return parseInt(e.getBoundingClientRect().bottom)<=window.innerHeight}}]),n}(r.a.Component);function xe(){var e=Object(p.a)(["\n    height:40px;\n    width:40px;\n    border-radius:50%;\n    position:absolute;\n    top:9px;\n    right:10px;\n    cursor: pointer;\n"]);return xe=function(){return e},e}function je(){var e=Object(p.a)(["\n    cursor: pointer;\n    color:black;\n"]);return je=function(){return e},e}function Oe(){var e=Object(p.a)(["\n    font-size: 21px;\n    font-weight: 200;\n    cursor: pointer;\n"]);return Oe=function(){return e},e}function ye(){var e=Object(p.a)(["\n    width: 90%;\n    height: 6vh;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n"]);return ye=function(){return e},e}var we=g.a.div(ye()),ke=g.a.div(Oe()),Ie=g.a.div(je()),Ee=g.a.img(xe()),$e=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={k:"private"},t.logoutButtonClicked=function(){localStorage.removeItem("jwt"),window.location.href="/"},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search).get("k");e&&this.setState({k:e})}},{key:"render",value:function(){var e=this.logoutButtonClicked,n=this.state.k,t=this.props,a=t.profilePhoto,i=t.turnOnChangeProfileView;return r.a.createElement(we,null,r.a.createElement("a",{style:{textDecoration:"none",color:"black"},href:"/"},r.a.createElement(ke,null,"R log")),"private"===n?r.a.createElement("a",{style:{textDecoration:"none"},href:"/?k=public"},r.a.createElement(Ie,null,"public")):r.a.createElement("a",{style:{textDecoration:"none"},href:"/"},r.a.createElement(Ie,null,"private")),r.a.createElement(Ie,{onClick:e},"logout"),r.a.createElement(Ee,{onClick:i,src:a||"https://images-na.ssl-images-amazon.com/images/I/91M76Va0YSL._SL1500_.jpg"}))}}]),n}(r.a.Component),Ce=t(53),Se="https://www.rlog.link",Le=t(64);function Be(){var e=Object(p.a)(["\n    background: white;\n    border: 0;\n    font-size: 20px;\n    cursor: pointer;\n    outline: none;\n    margin-top: 22px;\n"]);return Be=function(){return e},e}function Pe(){var e=Object(p.a)(["\n    width:250px;\n    height:250px;\n    border-radius:50%;\n    background:transparent;\n    object-fit:cover;\n    z-index:3;\n"]);return Pe=function(){return e},e}function Ae(){var e=Object(p.a)(["\n    position: absolute;\n    height: 250px;\n    opacity: 0;\n    cursor: pointer;\n    z-index: 4;\n\n"]);return Ae=function(){return e},e}function Te(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    position: relative;\n"]);return Te=function(){return e},e}function qe(){var e=Object(p.a)(["\n    position:fixed;\n    top:0;\n    left:0;\n    width:100%;\n    height:100%;\n    background:rgba(0,0,0,0.75);\n    z-index:3;\n    color:white;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    justify-content:center;\n"]);return qe=function(){return e},e}function Ue(){var e=Object(p.a)(["\nmutation($id:ID!, $profileImage:String, $profileImagePublicId:String) {\n    updateUserProfileImage(id:$id, profileImage:$profileImage, profileImagePublicId:$profileImagePublicId) {\n      id\n      profilePhoto\n      profilePhotoPublicId\n    }\n  }\n"]);return Ue=function(){return e},e}var De=t.n(Le)()(Ue()),ze=g.a.div(qe()),Fe=g.a.div(Te()),Me=g.a.input(Ae()),_e=g.a.img(Pe()),Re=g.a.button(Be()),Ne=function(e){function n(e){var t;return Object(l.a)(this,n),(t=Object(u.a)(this,Object(s.a)(n).call(this,e))).state={photoChanged:!1,changePhotoImage:"",newPhotoFile:null,loading:!1},t.okayButtonClicked=function(){t.setState({loading:!0});var e=t.state,n=e.newPhotoFile,a=e.photoChanged,r=t.props,i=r.turnOffChangeProfileView,o=r.changeProfileImage;if(!1!==a){var l=new FormData;l.append("file",n),console.log("new photo file: ",n),fetch(Se+":4000/api/image-to-cloudinary",{method:"POST",body:l}).then((function(e){e.json().then((function(e){var n=e.imageUrl,t=e.publicId,a={id:I(),profileImage:n,profileImagePublicId:t};fi.mutate({mutation:De,variables:a}).then((function(e){console.log("update user profile image result: ",e);var n=e.data.updateUserProfileImage,t=n.profilePhoto,a=n.profilePhotoPublicId;console.log("profilePhoto:",t),console.log("profilePhotoPublicId:",a),o(t),i()}))}))}))}else alert("You need to choose a new picture")},t.inputChange=function(e){t.setState({photoChanged:!0,changePhotoImage:URL.createObjectURL(e.target.files[0]),newPhotoFile:e.target.files[0]})},t.setWrapperRef=t.setWrapperRef.bind(Object(Ce.a)(t)),t.handleClickOutside=t.handleClickOutside.bind(Object(Ce.a)(t)),t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){if(this.wrapperRef&&!this.wrapperRef.contains(e.target)){var n=this.props.turnOffChangeProfileView;console.log("you clicked outside of card!"),n()}}},{key:"render",value:function(){var e=this.props.profilePhoto,n=this.inputChange,t=this.okayButtonClicked,a=this.state,i=a.photoChanged,o=a.changePhotoImage,l=a.loading;return r.a.createElement(ze,null,r.a.createElement(Fe,{ref:this.setWrapperRef},r.a.createElement(Me,{onChange:n,type:"file",accept:"image/*"}),i?r.a.createElement(_e,{src:o}):r.a.createElement(_e,{src:e||"https://images-na.ssl-images-amazon.com/images/I/91M76Va0YSL._SL1500_.jpg"}),r.a.createElement(Re,{disabled:!i,onClick:t},"Okay")),l&&r.a.createElement(ie,null))}}]),n}(r.a.Component);function Ve(){var e=Object(p.a)(["\n    width:100%;\n    min-height:100vh;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n"]);return Ve=function(){return e},e}function Ge(){var e=Object(p.a)(["\nquery($id:ID!){\n    user(id:$id) {\n      name\n      email\n      phone\n      profilePhoto\n    }\n  }\n"]);return Ge=function(){return e},e}var Ke=Object(_.b)(Ge()),We=g.a.div(Ve()),He=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={name:"",email:"",phone:"",profilePhoto:"",changeProfileView:!1,k:"",loading:!0},t.changeProfileImage=function(e){t.setState({profilePhoto:e})},t.turnOffChangeProfileView=function(){t.setState({changeProfileView:!1})},t.turnOnChangeProfileView=function(){t.setState({changeProfileView:!0})},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=new URLSearchParams(window.location.search).get("k");n&&this.setState({k:n});var t=I();fi.query({query:Ke,variables:{id:t}}).then((function(n){var t=n.data.user,a=t.email,r=t.name,i=t.phone,o=t.profilePhoto;e.setState({email:a,name:r,phone:i,profilePhoto:o,loading:!1})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this.state,n=e.profilePhoto,t=e.changeProfileView,a=e.k,i=e.loading,o=this.turnOnChangeProfileView,l=this.turnOffChangeProfileView,c=this.changeProfileImage;return r.a.createElement(We,null,i?"loading... ":r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{turnOnChangeProfileView:o,profilePhoto:n}),r.a.createElement(ve,{k:a}),t&&r.a.createElement(Ne,{changeProfileImage:c,turnOffChangeProfileView:l,profilePhoto:n})))}}]),n}(r.a.Component),Je=t(31),Ye=t(67),Xe=t.n(Ye),Qe=t(68),Ze=t.n(Qe),en=t(69),nn=t.n(en),tn=t(70),an=t.n(tn),rn=t(71),on=t.n(rn);function ln(){var e=Object(p.a)(["\n    color: white;\n    font-size: 15px;\n    position: absolute;\n    top: 41px;\n    left: 22px;\n    -webkit-transform: skew(45deg,-45deg);\n    -ms-transform: skew(45deg,-45deg);\n    transform: skew(45deg,-45deg);\n    cursor: pointer;\n"]);return ln=function(){return e},e}function cn(){var e=Object(p.a)(["\n    color: ",";\n    font-size: 20px;\n    position: absolute;\n    top: 12px;\n    left: 20px;\n    cursor: pointer;\n"]);return cn=function(){return e},e}function un(){var e=Object(p.a)(["\n    position: absolute;\n    top: 12px;\n    left: 19px;\n    width: 20px;\n    height: 20px;\n    opacity: 0;\n    z-index:2;\n    cursor: pointer;\n"]);return un=function(){return e},e}function sn(){var e=Object(p.a)(["\n    color:",";\n    position: absolute;\n    border: 0;\n    font-size: 20px;\n    text-align: center;\n    border-bottom: ",";\n    width: 48%;\n    padding-bottom: 10px;\n    outline:none;\n    background: transparent;\n\n"]);return sn=function(){return e},e}function dn(){var e=Object(p.a)(["\n    width: 100%;\n    height: 100%;\n    border-radius: 3px;\n"]);return dn=function(){return e},e}function pn(){var e=Object(p.a)(["\n    border: 0;\n    background: white;\n    outline:none;\n"]);return pn=function(){return e},e}function gn(){var e=Object(p.a)(["\n    width:50%;\n    position: relative;\n    height:200px;\n    overflow:hidden;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    margin-top:10px;\n"]);return gn=function(){return e},e}function fn(){var e=Object(p.a)(["\n    width:100vw;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    position: relative;\n"]);return fn=function(){return e},e}var mn=g.a.div(fn()),hn=g.a.div(gn()),bn=g.a.select(pn()),vn=g.a.img(dn()),xn=g.a.input(sn(),(function(e){return e.file?"white":"black"}),(function(e){return e.file?"0px":"1px solid black"})),jn=g.a.input(un()),On=g.a.i(cn(),(function(e){return e.file?"white":"black"})),yn=g.a.i(ln()),wn=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={title:"",titleImage:null,file:null},t.TitleImageDeleteButtonClicked=function(){(0,t.props.titleImageDeleteButtonClicked)(),document.getElementById("ImageUploadButton").value=""},t.TitleImageUploadButtonClicked=function(e){t.setState({file:URL.createObjectURL(e.target.files[0])})},t.handleInput=function(e){t.setState(Object(Je.a)({},e.target.name,e.target.value))},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.title,t=e.imageFile,a=e.handleInput,i=(e.edit,e.titleImageUploadButtonClicked),o=e.privateAsArgs,l=this.TitleImageDeleteButtonClicked;return r.a.createElement(mn,null,r.a.createElement(hn,null,t&&r.a.createElement(vn,{src:t}),r.a.createElement(xn,{file:t,onChange:a,name:"title",value:n}),r.a.createElement(jn,{id:"ImageUploadButton",onChange:i,accept:"image/*",type:"file"}),r.a.createElement(On,{file:t,className:"fas fa-plus"}),t&&r.a.createElement(yn,{onClick:l,className:"fas fa-plus"})),r.a.createElement(bn,{onChange:a,value:o,name:"privateAsArgs"},r.a.createElement("option",{value:!0},"private"),r.a.createElement("option",{value:!1},"public")))}}]),n}(r.a.Component);function kn(){var e=Object(p.a)(["\n    position: absolute;\n    top: 1%;\n    left: 2%;\n    cursor: pointer;\n    color:black;\n    z-index:2;\n"]);return kn=function(){return e},e}var In=g.a.div(kn()),En=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.to,t=e.text;return r.a.createElement(In,null,r.a.createElement(f.b,{style:{color:"black",textDecoration:"none"},to:n},t||"back"))}}]),n}(r.a.Component),$n=t(157),Cn=t.n($n),Sn=t(315),Ln=t(38);t(295);function Bn(){var e=Object(p.a)([""]);return Bn=function(){return e},e}function Pn(){var e=Object(p.a)(["\n    display:flex;\n    align-items:flex-start;\n"]);return Pn=function(){return e},e}function An(){var e=Object(p.a)(["\n    position: fixed;\n    bottom: 100px;\n    left: 50px;\n    z-index:2;\n"]);return An=function(){return e},e}function Tn(){var e=Object(p.a)([""]);return Tn=function(){return e},e}function qn(){var e=Object(p.a)(["\n    width:90%;\n"]);return qn=function(){return e},e}function Un(){var e=Object(p.a)(["\nmutation($logId:String!,\n    $type:String,\n    $text:String,\n    $imageUrl:String,\n    $stretched:Boolean,\n    $caption:String,\n    $embed:String,\n    $height:Int,\n    $service:String,\n    $source:String,\n    $width:Int,\n    $level:Int,\n    $withBackground:Boolean,\n    $withBorder:Boolean,\n    $link:String, \n    $title :String,\n    $description :String,\n    $image :String,\n    $publicId:String\n    ) {\n    addBlock(link:$link, title:$title, description:$description, image:$image, publicId:$publicId,\n        logId:$logId,withBackground:$withBackground, withBorder:$withBorder ,type:$type, text:$text, imageUrl:$imageUrl, stretched:$stretched, caption:$caption, embed:$embed, height:$height, service:$service, source:$source, width:$width, level:$level){\n      id\n      type\n      logId\n      data {\n        text\n        file {\n          url\n        }\n      }\n    }\n  }\n"]);return Un=function(){return e},e}function Dn(){var e=Object(p.a)(["\nmutation($title:String!, $userId:String!, $image:String, $time:String, $privateAsArgs:Boolean, $imagePublicId:String) {\n    addNewLog(title:$title, userId:$userId, image:$image, time:$time, privateAsArgs:$privateAsArgs, imagePublicId:$imagePublicId){\n      id \n      logData {\n        id\n      }\n    }\n  }\n"]);return Dn=function(){return e},e}function zn(){var e=Object(p.a)(["\nmutation($publicId:String!) {\n    destroyImage(publicId:$publicId){\n      ok\n    }\n  }\n"]);return zn=function(){return e},e}Cn.a.config();var Fn,Mn=0,_n=[],Rn=Object(_.b)(zn()),Nn=Object(_.b)(Dn()),Vn=Object(_.b)(Un()),Gn=g.a.div(qn()),Kn=g.a.div(Tn()),Wn=g.a.button(An()),Hn=(g.a.div(Pn()),g.a.select(Bn()),function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={loading:!0,title:"",imageUrl:"",imageFile:"",file:null,privateAsArgs:"true",uploading:!1},t.titleImageDeleteButtonClicked=function(){t.setState({imageFile:"",file:null})},t.titleImageUploadButtonClicked=function(e){console.log(URL.createObjectURL(e.target.files[0])),t.setState({imageFile:URL.createObjectURL(e.target.files[0]),file:e.target.files[0]}),console.log("image file changed:",t.state.file)},t.handleInput=function(e){t.setState(Object(Je.a)({},e.target.name,e.target.value))},t.requestToGraphqlServerInOrder=function(){var e=Object(x.a)(b.a.mark((function e(n,a,r){var i,o,l,c,u,s,d,p,g,f,m,h,v,x,j,O,y,w,k,I,E,$,C,S,L,B,P,A,T,q;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("here"),Mn===n?window.location.href="/log/".concat(r):"image"===(i=a[Mn]).type?(o=i.data.file,l=o.url,c=o.publicId,console.log("public id:",c),u=i.data,s=u.caption,d=u.stretched,p=u.withBackground,g=u.withBorder,f={logId:r,type:"image",imageUrl:l,stretched:d,caption:s,withBackground:p,withBorder:g,publicId:c},fi.mutate({mutation:Vn,variables:f}).then((function(e){Mn+=1,t.requestToGraphqlServerInOrder(n,a,r)}))):"paragraph"===i.type?(m=i.data.text,h={logId:r,type:"paragraph",text:m},fi.mutate({mutation:Vn,variables:h}).then((function(e){Mn+=1,t.requestToGraphqlServerInOrder(n,a,r)}))):"header"===i.type?(v=i.data,x=v.text,j=v.level,O={logId:r,type:"header",text:x,level:j},fi.mutate({mutation:Vn,variables:O}).then((function(e){Mn+=1,t.requestToGraphqlServerInOrder(n,a,r)}))):"linkTool"===i.type?(y=i.data.link,w=i.data.meta,k=w.description,I=w.title,E=i.data.meta.image.url,$={logId:r,type:"linkTool",link:y,title:I,description:k,image:E},fi.mutate({mutation:Vn,variables:$}).then((function(e){Mn+=1,t.requestToGraphqlServerInOrder(n,a,r)}))):"embed"===i.type&&(C=i.data,S=C.service,L=C.source,B=C.embed,P=C.caption,A=C.height,T=C.width,q={logId:r,type:"embed",service:S,source:L,embed:B,caption:P,height:A,width:T},fi.mutate({mutation:Vn,variables:q}).then((function(e){Mn+=1,t.requestToGraphqlServerInOrder(n,a,r)})));case 2:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),t.submitButtonClicked=function(){var e=t.state,n=e.title,a=e.file,r=e.privateAsArgs;if(t.setState({uploading:!0}),null!==n&&""!==n){var i=(new Date).getTime().toString(),o=I(),l=t.props.addNewLogMutation,c=new FormData;console.log("file",a),c.append("file",a),c.append("upload_preset","ndp6lsvf");var u=new XMLHttpRequest;u.open("POST","https://api.cloudinary.com/v1_1/blog-naver-com-donggyu-00/upload",!1),u.send(c);var s=JSON.parse(u.responseText);console.log("image response",s),l({variables:{title:n,userId:o,image:s.secure_url,time:i,privateAsArgs:"true"===r,imagePublicId:s.public_id}}).then((function(e){var n=e.data.addNewLog.id;Fn.save().then((function(e){var a=e.blocks;console.log("outputdata:",e);var r=a.length;t.requestToGraphqlServerInOrder(r,a,n)}))})).catch((function(e){return console.error(e)}))}else alert("You need title")},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentWillUnmount",value:function(){var e=Object(x.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_n.map((function(e){console.log("public id:",e),fi.mutate({mutation:Rn,variables:{publicId:e}}).then(console.log)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){Fn=new Xe.a({holder:"editorjs",tools:{linkTool:{class:on.a,config:{endpoint:Se+":4000/api/fetchUrl"}},header:{class:Ze.a,inlineToolbar:["link"]},embed:{class:nn.a,inlineToolbar:!1,config:{services:{youtube:!0}}},image:{class:an.a,config:{uploader:{uploadByFile:function(e){var n=new FormData;n.append("file",e),n.append("upload_preset","ndp6lsvf");var t=new XMLHttpRequest;t.open("POST","https://api.cloudinary.com/v1_1/blog-naver-com-donggyu-00/upload",!1),t.send(n);var a=JSON.parse(t.responseText);console.log("image response:",a);a.public_id,a.signature;return _n.push(a.public_id),{success:1,file:{url:a.secure_url,publicId:a.public_id}}},uploadByUrl:function(e){return fetch(e).then((function(e){return e.blob()})).then((function(e){e.lastModifiedDate=new Date,e.name="imageFromUrl";var n=e,t=new FormData;t.append("file",n),t.append("upload_preset","ndp6lsvf");var a=new XMLHttpRequest;a.open("POST","https://api.cloudinary.com/v1_1/blog-naver-com-donggyu-00/upload",!1),a.send(t);var r=JSON.parse(a.responseText);return console.log("image response:",r),_n.push(r.public_id),{success:1,file:{url:r.secure_url,publicId:r.public_id}}}))}}}}}}),this.setState({loading:!1})}},{key:"render",value:function(){var e=this.state,n=e.loading,t=e.imageFile,a=e.title,i=e.privateAsArgs,o=e.uploading,l=this.submitButtonClicked,c=this.handleInput,u=this.titleImageUploadButtonClicked,s=this.titleImageDeleteButtonClicked;return n?"loading....":r.a.createElement(Gn,null,r.a.createElement(En,{to:"/"}),r.a.createElement(wn,{privateAsArgs:i,titleImageDeleteButtonClicked:s,titleImageUploadButtonClicked:u,imageFile:t,title:a,handleInput:c}),r.a.createElement(Kn,{id:"editorjs"}),r.a.createElement(Wn,{onClick:l},"Submit"),o&&r.a.createElement(ie,null))}},{key:"sleep",value:function(e){for(var n=(new window.Date).getTime();(new window.Date).getTime()<n+e;);}}]),n}(r.a.Component)),Jn=Object(Ln.a)(Object(Sn.a)(Nn,{name:"addNewLogMutation"}),Object(Sn.a)(Vn,{name:"addBlock"}))(Hn);function Yn(){var e=Object(p.a)(["\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    margin: 0 0 0 30px;\n    width: 65px;\n    height: 65px;\n    border-radius: 3px;\n    position:absolute;\n    top:30px;\n    right:30px;\n"]);return Yn=function(){return e},e}function Xn(){var e=Object(p.a)(["\n    margin: 0 0 20px 0;\n    font-size: 15px;\n    line-height: 1.55em;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    width:82%;\n    max-height:80px;\n"]);return Xn=function(){return e},e}function Qn(){var e=Object(p.a)(["\n    font-size: 17px;\n    font-weight: 600;\n    line-height: 1.5em;\n    max-width:80%;\n    margin: 0 0 10px 0;\n"]);return Qn=function(){return e},e}function Zn(){var e=Object(p.a)(["\n    /* width:650px; */\n    padding-left:20px;\n    padding-right:20px;\n    padding-top:30px;\n    padding-bottom:20px;\n    background:#fff;\n    border: 1px solid rgba(201, 201, 204, 0.48);\n    box-shadow: 0 1px 3px rgba(0,0,0, .1);\n    border-radius: 6px;\n    display:flex;\n    flex-direction:column;\n    align-items:flex-start;\n    position: relative;\n    text-decoration:none;\n    color:black;\n    margin-bottom:30px;\n"]);return Zn=function(){return e},e}function et(){var e=Object(p.a)(["\n    margin-bottom:20px;\n    width:100%;\n"]);return et=function(){return e},e}function nt(){var e=Object(p.a)(["\n    max-width:100%;\n"]);return nt=function(){return e},e}function tt(){var e=Object(p.a)(["\n    /* max-width:80%; */\n    display:flex;\n    flex-direction:column;\n    /* align-items:center; */\n    \n"]);return tt=function(){return e},e}function at(){var e=Object(p.a)(["\n    font-size:15px;\n    margin-bottom:20px;\n    line-height: 1.8;\n    width:100%;\n"]);return at=function(){return e},e}function rt(){var e=Object(p.a)(["\n    margin-left:20px;\n    margin-right:20px;\n    font-size:14px;\n"]);return rt=function(){return e},e}function it(){var e=Object(p.a)(["\nborder:1px solid gainsboro;\nborder-radius:4px;\nmargin-bottom:20px;\n"]);return it=function(){return e},e}function ot(){var e=Object(p.a)(["\n    width:100%;\n    height:100%;\n"]);return ot=function(){return e},e}function lt(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n"]);return lt=function(){return e},e}function ct(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    min-height:20px;\n\n"]);return ct=function(){return e},e}var ut=g.a.div(ct()),st=(g.a.div(lt()),g.a.iframe(ot())),dt=g.a.div(it()),pt=g.a.div(rt()),gt=g.a.div(at()),ft=g.a.div(tt()),mt=g.a.img(nt()),ht=g.a.div(et()),bt=g.a.a(Zn()),vt=g.a.div(Qn()),xt=g.a.div(Xn()),jt=g.a.img(Yn()),Ot=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).replaceAll=function(e,n,t){return e.replace(new RegExp(n,"g"),t)},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props.block;this.replaceAll;return r.a.createElement(ut,null,"embed"===e.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(st,{style:{width:e.data.width,height:e.data.height},src:e.data.embed}),r.a.createElement(dt,{style:{width:e.data.width,paddingTop:10,paddingBottom:10}},r.a.createElement(pt,null,this.replaceAll(e.data.caption,"&nbsp;"," ")))),"linkTool"===e.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(bt,{target:"_blank",href:e.data.link},r.a.createElement(vt,null,e.data.meta.title),r.a.createElement(xt,null,e.data.meta.description),e.data.meta.image.url&&r.a.createElement(jt,{src:e.data.meta.image.url}))),"paragraph"===e.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(gt,null,this.replaceAll(e.data.text,"&nbsp;"," "))),"image"===e.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ft,null,r.a.createElement(mt,{src:e.data.file.url}),r.a.createElement(dt,{style:{width:e.data.width,paddingTop:10,paddingBottom:10}},r.a.createElement(pt,null,this.replaceAll(e.data.caption,"&nbsp;"," "))))),"header"===e.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht,null,1===e.data.level&&r.a.createElement("h1",null,this.replaceAll(e.data.text,"&nbsp;"," ")),2===e.data.level&&r.a.createElement("h2",null,this.replaceAll(e.data.text,"&nbsp;"," ")),3===e.data.level&&r.a.createElement("h3",null,this.replaceAll(e.data.text,"&nbsp;"," ")),4===e.data.level&&r.a.createElement("h4",null,this.replaceAll(e.data.text,"&nbsp;"," ")),5===e.data.level&&r.a.createElement("h5",null,this.replaceAll(e.data.text,"&nbsp;"," ")),6===e.data.level&&r.a.createElement("h6",null,this.replaceAll(e.data.text,"&nbsp;"," ")))))}}]),n}(r.a.Component);function yt(){var e=Object(p.a)(["\n    position: fixed;\n    right:0;\n    height:100%;\n    background: rgb(244,243,247);\n    background: linear-gradient(90deg, white 0%, rgba(220,220,232,1) 55%, rgba(147,147,154,1) 100%);\n    padding-right:25px;\n    padding-left:25px;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    opacity:0;\n    color:black;\n    &:hover {\n        opacity:0.9;\n    }\n    cursor: pointer;\n    transition:0.3s;\n"]);return yt=function(){return e},e}var wt=g.a.div(yt()),kt=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).buttonClicked=function(){var e=t.props.id;window.location.href="/log/".concat(e)},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.buttonClicked;return r.a.createElement(wt,{onClick:e},"previous")}}]),n}(r.a.Component);function It(){var e=Object(p.a)(["\n    position: fixed;\n    left:0;\n    height:100%;\n    width:61px;\n    background: rgb(244,243,247);\n    background: linear-gradient(270deg, white 0%, rgba(220,220,232,1) 55%, rgba(147,147,154,1) 100%);\n    padding-right:25px;\n    padding-left:25px;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    opacity:0;\n    &:hover {\n        opacity:0.9;\n    }\n    cursor: pointer;\n    transition:0.3s;\n"]);return It=function(){return e},e}var Et=g.a.div(It()),$t=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).buttonClicked=function(){var e=t.props.id;window.location.href="/log/".concat(e)},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.buttonClicked;return r.a.createElement(Et,{onClick:e},"next")}}]),n}(r.a.Component);function Ct(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n"]);return Ct=function(){return e},e}function St(){var e=Object(p.a)(["\n    font-weight:200;\n"]);return St=function(){return e},e}function Lt(){var e=Object(p.a)(["\n    font-size: 18px;\n    font-weight: 500;\n    margin-right:10px;\n\n"]);return Lt=function(){return e},e}function Bt(){var e=Object(p.a)(["\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    object-fit: cover;\n    margin-right: 10px;\n"]);return Bt=function(){return e},e}function Pt(){var e=Object(p.a)(["\n    display:flex;\n    align-items:center;\n    width: 50%;\n    margin-top: 20px;\n    margin-bottom: 10px;\n"]);return Pt=function(){return e},e}var At=g.a.div(Pt()),Tt=g.a.img(Bt()),qt=g.a.div(Lt()),Ut=g.a.div(St()),Dt=g.a.div(Ct()),zt=function(e){var n=e.username,t=e.profilePhoto,a=e.userEmail;return r.a.createElement(At,null,r.a.createElement(Tt,{src:t||"https://images-na.ssl-images-amazon.com/images/I/91M76Va0YSL._SL1500_.jpg"}),r.a.createElement(Dt,null,r.a.createElement(qt,null,n),r.a.createElement(Ut,null,a)))};function Ft(){var e=Object(p.a)(["\n    width:50%;\n    margin-top:70px;\n"]);return Ft=function(){return e},e}function Mt(){var e=Object(p.a)(["\n    position:absolute;\n    right:6px;\n    bottom:0px;\ncolor:",";\n    font-size: 12px;\n    font-weight: 800;\n"]);return Mt=function(){return e},e}function _t(){var e=Object(p.a)(["\n    width:100%;\n    height:100%;\n    margin-top:10px;\n    object-fit:cover;\n"]);return _t=function(){return e},e}function Rt(){var e=Object(p.a)(["\n    position:absolute;\n    color:",";\n    font-size:20px;\n    font-weight:700;\n"]);return Rt=function(){return e},e}function Nt(){var e=Object(p.a)(["\n    width:50%;\n    height:200px;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    position: relative;\n"]);return Nt=function(){return e},e}function Vt(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n"]);return Vt=function(){return e},e}function Gt(){var e=Object(p.a)(["\nquery Log($id:ID!, $userId:String){\n    log(id:$id, userId:$userId) {\n      id,\n      previousLogId\n      userId\n      nextLogId\n      title,\n      year,\n      month,\n      day,\n      image,\n      logData {\n        blocks {\n          id\n          type\n          data {\n            meta {\n                title\n                description\n                image {\n                    url\n                }\n            }\n            link,\n            text,\n            file {\n              url\n            },\n            stretched,\n            caption,\n            embed,\n            service,\n            source,\n            height,\n            width,\n            level,\n            withBorder,\n            withBackground\n          }\n        }\n      }\n    }\n  }\n"]);return Gt=function(){return e},e}function Kt(){var e=Object(p.a)(["\nquery($id:ID!){\n    user(id:$id) {\n      name\n      profilePhoto\n      email\n    }\n  }\n"]);return Kt=function(){return e},e}var Wt=Object(_.b)(Kt()),Ht=Object(_.b)(Gt()),Jt=g.a.div(Vt()),Yt=g.a.div(Nt()),Xt=g.a.div(Rt(),(function(e){return e.image?"white":"black"})),Qt=g.a.img(_t()),Zt=g.a.div(Mt(),(function(e){return e.image?"white":"black"})),ea=g.a.div(Ft()),na=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={loading:!0,log:{},blocks:[],k:"private",username:"",profilePhoto:"",userEmail:""},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(b.a.mark((function e(){var n,t,a,r,i,o,l,c,u=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(window.location.search),(t=n.get("k"))&&this.setState({k:t}),a=this.props.match.params.logId,r=I(),e.next=7,fi.query({query:Ht,variables:{id:a,userId:r}});case 7:i=e.sent,null===(o=i.data.log)&&(alert("You don't have authority to access"),window.location.href="/"),l=o.userId,c=i.data.log.logData.blocks,fi.query({query:Wt,variables:{id:l}}).then((function(e){console.log("response: ",e),u.setState({loading:!1,log:o,blocks:c,username:e.data.user.name,profilePhoto:e.data.user.profilePhoto,userEmail:e.data.user.email})}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,n=e.loading,t=e.log,a=e.blocks,i=e.k,o=e.username,l=e.profilePhoto,c=e.userEmail;return n?r.a.createElement(Jt,null,"Loading..."):r.a.createElement(Jt,null,r.a.createElement(En,{to:"public"===i?"/?k=public":"/",text:"logs"}),r.a.createElement(Yt,null,r.a.createElement(Xt,{image:t.image},t.title),t.image&&r.a.createElement(Qt,{src:t.image}),r.a.createElement(Zt,{image:t.image},t.day," ",t.month," ",t.year)),r.a.createElement(zt,{userEmail:c,username:o,profilePhoto:l}),r.a.createElement(ea,null,a.map((function(e){return r.a.createElement(Ot,{key:e.id,block:e})}))),"private"===i&&r.a.createElement(r.a.Fragment,null,t.previousLogId&&r.a.createElement(kt,{id:t.previousLogId}),t.nextLogId&&r.a.createElement($t,{id:t.nextLogId})))}}]),n}(r.a.Component),ta=Object(m.f)(na);function aa(){var e=Object(p.a)(["\n    position:fixed;\n    bottom:20px;\n    left:20px;\n    z-index: 3;\n"]);return aa=function(){return e},e}function ra(){var e=Object(p.a)(["\n    position:absolute;\n    right:6px;\n    bottom:0px;\ncolor:",";\n    font-size: 12px;\n    font-weight: 800;\n"]);return ra=function(){return e},e}function ia(){var e=Object(p.a)(["\n    width:100%;\n"]);return ia=function(){return e},e}function oa(){var e=Object(p.a)(["\n    /* display:flex;\n    flex-direction:column;\n    align-items:center; */\n    width:90%;\n"]);return oa=function(){return e},e}function la(){var e=Object(p.a)(["\nquery Log($id:ID!, $userId:String){\n    log(id:$id, userId:$userId) {\n      id,\n      previousLogId,\n      private,\n      private2\n    nextLogId\n      title,\n      year,\n      month,\n      day,\n      image,\n      logData {\n        time\n        blocks {\n          id\n          type\n          data {\n            meta {\n                title\n                description\n                image {\n                    url\n                }\n            }\n            link,\n            text,\n            file {\n              url\n              publicId\n            },\n            stretched,\n            caption,\n            embed,\n            service,\n            source,\n            height,\n            width,\n            level,\n            withBorder,\n            withBackground\n          }\n        }\n      }\n    }\n  }\n"]);return la=function(){return e},e}function ca(){var e=Object(p.a)(["\nmutation($id:String!, $newTitle:String!, $privateAsArg:Boolean) {\n    changeLogTitle(id:$id, newTitle:$newTitle, privateAsArg:$privateAsArg) {\n      id\n      title\n    }\n  }\n"]);return ca=function(){return e},e}function ua(){var e=Object(p.a)(["\nmutation($id:String!, $newImage:String, $publicId:String) {\n    changeLogImage(id:$id, newImage:$newImage, publicId:$publicId){\n      id\n      image\n    }\n  }\n"]);return ua=function(){return e},e}function sa(){var e=Object(p.a)(["\nmutation($logId:String!, $userId:String!) {\n    deleteAllBlocksFromLog(logId:$logId, userId:$userId){\n      id\n      title\n    }\n  }\n"]);return sa=function(){return e},e}function da(){var e=Object(p.a)(["\nmutation($logId:String!,\n    $type:String,\n    $text:String,\n    $imageUrl:String,\n    $stretched:Boolean,\n    $caption:String,\n    $embed:String,\n    $height:Int,\n    $service:String,\n    $source:String,\n    $width:Int,\n    $level:Int,\n    $withBackground:Boolean,\n    $withBorder:Boolean,\n    $link:String, \n    $title :String,\n    $description :String,\n    $image :String,\n    $publicId:String\n    ) {\n    addBlock(link:$link, title:$title, description:$description, image:$image, publicId:$publicId,\n        logId:$logId,withBackground:$withBackground, withBorder:$withBorder ,type:$type, text:$text, imageUrl:$imageUrl, stretched:$stretched, caption:$caption, embed:$embed, height:$height, service:$service, source:$source, width:$width, level:$level){\n      id\n      type\n      logId\n      data {\n        text\n        file {\n          url\n        }\n      }\n    }\n  }\n"]);return da=function(){return e},e}var pa,ga=0,fa=[],ma=Object(_.b)(da()),ha=Object(_.b)(sa()),ba=Object(_.b)(ua()),va=Object(_.b)(ca()),xa=Object(_.b)(la()),ja=g.a.div(oa()),Oa=g.a.div(ia()),ya=g.a.div(ra(),(function(e){return e.image?"white":"black"})),wa=g.a.button(aa()),ka=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={loading:!0,log:{},logData:{},privateAsArgs:!0,imageFile:"",file:null,title:"",titleImageChanged:!1,uploading:!1},t.requestToGraphqlServerInOrder=function(){var e=Object(x.a)(b.a.mark((function e(n,a){var r,i,o,l,c,u,s,d,p,g,f,m,h,v,x,j,O,y,w,k,I,E,$,C,S,L,B,P,A,T,q,U,D;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.match.params.logId,ga!==n){e.next=6;break}t.setState({uploading:!1}),window.location.href="/log/".concat(r),e.next=64;break;case 6:if("image"!==(i=a[ga]).type){e.next=28;break}return o=i.data.file,l=o.url,c=o.public_id,u=o.publicId,console.log("block.data.file:",i.data.file),console.log("public id",u),s=u,console.log("public_id:",c),console.log("publicId:",u),console.log("pbId:",s),null!==s&&void 0!==s||(console.log("here"),s=c),console.log("pbId:",s),console.log("when you upload image:",i.data.file),console.log(i.data),d=i.data,p=d.caption,g=d.stretched,f=d.withBackground,m=d.withBorder,h={logId:r,type:"image",imageUrl:l,stretched:g,caption:p,withBackground:f,withBorder:m,publicId:s},console.log("variables:",h),e.next=24,fi.mutate({mutation:ma,variables:h});case 24:ga+=1,t.requestToGraphqlServerInOrder(n,a),e.next=64;break;case 28:if("paragraph"!==i.type){e.next=37;break}return v=i.data.text,x={logId:r,type:"paragraph",text:v},e.next=33,fi.mutate({mutation:ma,variables:x});case 33:ga+=1,t.requestToGraphqlServerInOrder(n,a),e.next=64;break;case 37:if("header"!==i.type){e.next=46;break}return j=i.data,O=j.text,y=j.level,w={logId:r,type:"header",text:O,level:y},e.next=42,fi.mutate({mutation:ma,variables:w});case 42:ga+=1,t.requestToGraphqlServerInOrder(n,a),e.next=64;break;case 46:if("linkTool"!==i.type){e.next=57;break}return k=i.data.link,I=i.data.meta,E=I.description,$=I.title,C=i.data.meta.image.url,S={logId:r,type:"linkTool",link:k,title:$,description:E,image:C},e.next=53,fi.mutate({mutation:ma,variables:S});case 53:ga+=1,t.requestToGraphqlServerInOrder(n,a),e.next=64;break;case 57:if("embed"!==i.type){e.next=64;break}return L=i.data,B=L.service,P=L.source,A=L.embed,T=L.caption,q=L.height,U=L.width,D={logId:r,type:"embed",service:B,source:P,embed:A,caption:T,height:q,width:U},e.next=62,fi.mutate({mutation:ma,variables:D});case 62:ga+=1,t.requestToGraphqlServerInOrder(n,a);case 64:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),t.editButtonClicked=Object(x.a)(b.a.mark((function e(){var n,a,r,i,o,l,c,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({uploading:!0}),n=t.state,a=n.title,r=n.titleImageChanged,i=n.file,o=n.privateAsArgs,l=t.props.match.params.logId,c=I(),e.next=6,fi.mutate({mutation:va,variables:{id:l,newTitle:a,privateAsArg:"true"===o}}).then((function(){if(r){var e=new FormData;console.log("file",i),e.append("file",i),fetch(Se+":4000/api/image-to-cloudinary",{method:"POST",body:e}).then((function(e){e.json().then((function(e){var n=e.imageUrl,a=e.publicId;console.log("image url from server:",n),console.log("image public id from server:",a),fi.mutate({mutation:ba,variables:{id:l,newImage:n,publicId:a}}).then((function(e){console.log("change title image:",e),fi.mutate({mutation:ha,variables:{logId:l,userId:c}}).then((function(){pa.save().then((function(e){console.log("outputdata:",e);var n=e.blocks,a=n.length;t.requestToGraphqlServerInOrder(a,n)}))}))}))}))}))}else fi.mutate({mutation:ha,variables:{logId:l,userId:c}}).then((function(){pa.save().then((function(e){console.log("outputdata:",e);var n=e.blocks,a=n.length;t.requestToGraphqlServerInOrder(a,n)}))}))}));case 6:u=e.sent,console.log("change log title response: ",u);case 8:case"end":return e.stop()}}),e)}))),t.handleInput=function(e){t.setState(Object(Je.a)({},e.target.name,e.target.value))},t.titleImageUploadButtonClicked=function(e){console.log(URL.createObjectURL(e.target.files[0])),console.log("file when file changed:",e.target.files[0]),t.setState({imageFile:URL.createObjectURL(e.target.files[0]),file:e.target.files[0],titleImageChanged:!0}),console.log("file changed",t.state)},t.titleImageDeleteButtonClicked=function(){t.setState({imageFile:"",file:null,titleImageChanged:!0}),console.log("file:",t.state.file)},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(b.a.mark((function e(){var n,t,a,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.match.params.logId,t=I(),e.next=4,fi.query({query:xa,variables:{id:n,userId:t}});case 4:a=e.sent,console.log("response:",a),null===(r=a.data.log)&&(alert("You don't have authority to access"),window.location.href="/"),i=a.data.log.logData,console.log("logdata:",i),pa=new Xe.a({holder:"editorjs",tools:{linkTool:{class:on.a,config:{endpoint:Se+":4000/api/fetchUrl"}},header:{class:Ze.a,inlineToolbar:["link"]},embed:{class:nn.a,inlineToolbar:!1,config:{services:{youtube:!0}}},image:{class:an.a,config:{uploader:{uploadByFile:function(e){var n=new FormData;n.append("file",e),n.append("upload_preset","ndp6lsvf");var t=new XMLHttpRequest;t.open("POST","https://api.cloudinary.com/v1_1/blog-naver-com-donggyu-00/upload",!1),t.send(n);var a=JSON.parse(t.responseText);return console.log("image response: ",a),fa.push(a.public_id),{success:1,file:{url:a.secure_url,public_id:a.public_id}}},uploadByUrl:function(e){return fetch(e).then((function(e){return e.blob()})).then((function(e){e.lastModifiedDate=new ya,e.name="imageFromUrl";var n=e,t=new FormData;t.append("file",n),t.append("upload_preset","ndp6lsvf");var a=new XMLHttpRequest;a.open("POST","https://api.cloudinary.com/v1_1/blog-naver-com-donggyu-00/upload",!1),a.send(t);var r=JSON.parse(a.responseText);return console.log("image response:",r),fa.push(r.public_id),{success:1,file:{url:r.secure_url,publicId:r.public_id}}}))}}}}},data:a.data.log.logData}),console.log("private2:",a.data.log.private2),this.setState({loading:!1,log:r,logData:i,imageFile:a.data.log.image,title:a.data.log.title,privateAsArgs:a.data.log.private2});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,n=e.loading,t=(e.log,e.privateAsArgs),a=e.imageFile,i=e.title,o=e.uploading,l=this.titleImageDeleteButtonClicked,c=this.titleImageUploadButtonClicked,u=this.handleInput,s=this.editButtonClicked;return n?r.a.createElement(ja,null,"Loading...."):r.a.createElement(ja,null,r.a.createElement(En,{to:"/",text:"logs"}),r.a.createElement(wn,{titleImageUploadButtonClicked:c,imageFile:a,title:i,handleInput:u,privateAsArgs:t,edit:!0,titleImageDeleteButtonClicked:l}),r.a.createElement(Oa,{id:"editorjs"}),r.a.createElement(wa,{onClick:s},"Edit"),o&&r.a.createElement(ie,null))}},{key:"waitForIt",value:function(){}}]),n}(r.a.Component),Ia=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/",exact:!0,component:He}),r.a.createElement(m.a,{path:"/post",exact:!0,component:Jn}),r.a.createElement(m.a,{path:"/log/:logId",exact:!0,component:ta}),r.a.createElement(m.a,{path:"/edit/log/:logId",exact:!0,component:ka}),r.a.createElement(m.a,{component:He})))}}]),n}(r.a.Component);function Ea(){var e=Object(p.a)(["\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 130px;\n    user-select:none;\n"]);return Ea=function(){return e},e}var $a=g.a.div(Ea()),Ca=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement($a,null,"\xa9 2019- shin donggyu All Rights Reserved")}}]),n}(r.a.Component);function Sa(){var e=Object(p.a)(["\n    margin-left: 33px;\n    position: absolute;\n    left: 20px;\n    top: -2px;\n    cursor: pointer;\n    color:black;\n"]);return Sa=function(){return e},e}function La(){var e=Object(p.a)(["\n    border: 0;\n    font-size: 20px;\n    padding-top: 2px;\n    padding-bottom: 2px;\n    border-radius: 7px;\n    transition:0.7s;\n    background: white;\n    cursor: pointer;\n    &:hover {\n        color:white;\n        background:black;\n    }\n"]);return La=function(){return e},e}function Ba(){var e=Object(p.a)(["\n    border: 0;\n    font-size: 20px;\n    padding-top: 2px;\n    padding-bottom: 2px;\n    border-radius: 7px;\n    transition:0.7s;\n    background: white;\n    cursor: pointer;\n    &:hover {\n        color:white;\n        background:black;\n    }\n"]);return Ba=function(){return e},e}function Pa(){var e=Object(p.a)(["\n    margin-right: 20px;\n    width: 166px;\n    display: flex;\n    justify-content: space-between;\n"]);return Pa=function(){return e},e}function Aa(){var e=Object(p.a)(["\n    display: flex;\n    align-items: center;\n    height:7vh;\n    justify-content: flex-end;\n    z-index:1;\n    position: relative;\n"]);return Aa=function(){return e},e}var Ta=g.a.div(Aa()),qa=g.a.div(Pa()),Ua=g.a.button(Ba()),Da=g.a.button(La()),za=g.a.h1(Sa()),Fa=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(Ta,null,r.a.createElement(f.b,{to:"/love-u"},r.a.createElement(za,null,"R log")),r.a.createElement(qa,null,r.a.createElement(f.b,{to:"/signin"},r.a.createElement(Ua,null,"Sign In")),r.a.createElement(f.b,{to:"/signup"},r.a.createElement(Da,null,"Sign Up"))))}}]),n}(r.a.Component);function Ma(){var e=Object(p.a)(["\n    position:absolute;\n    top:0;\n    width:100%;\n    height:100%;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    color:white;\n    font-size: 32px;\n    text-shadow: 7px 5px 3px rgba(7,3,2,0.56);\n    user-select:none;\n"]);return Ma=function(){return e},e}function _a(){var e=Object(p.a)(["\n    width:100%;\n    border-radius: 7px;\n    user-select:none;\n"]);return _a=function(){return e},e}function Ra(){var e=Object(p.a)(["\n    width:424px;\n    position: relative;\n    user-select:none;\n"]);return Ra=function(){return e},e}function Na(){var e=Object(p.a)(["\n    position: absolute;\n    height: 100vh;\n    align-items: center;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n"]);return Na=function(){return e},e}var Va=g.a.div(Na()),Ga=g.a.div(Ra()),Ka=g.a.img(_a()),Wa=g.a.div(Ma()),Ha=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(Va,null,r.a.createElement(Ga,null,r.a.createElement(Ka,{src:t(312)}),r.a.createElement(Wa,null,"Hello world!")))}}]),n}(r.a.Component);function Ja(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n    min-height:100vh;\n    width:100%;\n    position: relative;\n"]);return Ja=function(){return e},e}var Ya=g.a.div(Ja()),Xa=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(Ya,null,r.a.createElement(Fa,null),r.a.createElement(Ha,null),r.a.createElement(Ca,null))}}]),n}(r.a.Component);function Qa(){var e=Object(p.a)(["\n    width: 55%;\n    border: 0;\n    border-bottom: 1px solid black;\n    outline: none;\n    text-align: center;\n    font-size: 13px;\n    padding-bottom: 6px;\n    background: transparent;\n"]);return Qa=function(){return e},e}function Za(){var e=Object(p.a)([""]);return Za=function(){return e},e}function er(){var e=Object(p.a)(["\n    display:flex;\n    width: 60%;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    justify-content:space-between;\n"]);return er=function(){return e},e}function nr(){var e=Object(p.a)(["\n    width:50%;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    justify-content:center;\n"]);return nr=function(){return e},e}var tr=g.a.div(nr()),ar=g.a.div(er()),rr=g.a.div(Za()),ir=g.a.input.attrs((function(e){return{disabled:!0}}))(Qa()),or=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.name,t=e.password,a=e.checkPassword,i=e.phone,o=e.email;return r.a.createElement(tr,null,r.a.createElement(ar,null,r.a.createElement(rr,null,"name:"),r.a.createElement(ir,{value:n})),r.a.createElement(ar,null,r.a.createElement(rr,null,"password:"),r.a.createElement(ir,{type:"password",value:t})),r.a.createElement(ar,null,r.a.createElement(rr,null,"check password:"),r.a.createElement(ir,{type:"password",value:a})),r.a.createElement(ar,null,r.a.createElement(rr,null,"phone:"),r.a.createElement(ir,{value:i})),r.a.createElement(ar,null,r.a.createElement(rr,null,"email:"),r.a.createElement(ir,{value:o})))}}]),n}(r.a.Component);function lr(){var e=Object(p.a)(["\n    position: absolute;\n    top: 79%;\n    border: 0;\n    color: white;\n    background: black;\n    border-radius: 3px;\n    padding-left: 15px;\n    padding-right: 15px;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    font-size: 14px;\n    cursor: pointer;\n    z-index: 1;\n"]);return lr=function(){return e},e}function cr(){var e=Object(p.a)(["\n    width: 50%;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 20px;\n    border-radius: 4px;\n    border: 2px solid gainsboro;\n    outline: none;\n    padding-left:10px;\n"]);return cr=function(){return e},e}function ur(){var e=Object(p.a)(["\n    width:50%;\n    display:flex;\n    flex-direction:column;\n    justify-content:center;\n    align-items:center;\n    position: relative;\n"]);return ur=function(){return e},e}var sr=g.a.div(ur()),dr=g.a.input(cr()),pr=g.a.button(lr()),gr=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.name,t=e.password,a=e.checkPassword,i=e.phone,o=e.email,l=e.handleInput,c=e.submitButtonClicked;return r.a.createElement(sr,null,r.a.createElement(dr,{placeholder:"e.g) shin donggyu",name:"name",onChange:l,value:n}),r.a.createElement(dr,{placeholder:"e.g) ************",name:"password",type:"password",onChange:l,value:t}),r.a.createElement(dr,{placeholder:"e.g) ************",name:"checkPassword",type:"password",onChange:l,value:a}),r.a.createElement(dr,{placeholder:"e.g) 01093201234",name:"phone",onChange:l,value:i}),r.a.createElement(dr,{placeholder:"nyaconnected@gmail.com",name:"email",onChange:l,value:o}),r.a.createElement(pr,{onClick:c},"Submit"))}}]),n}(r.a.Component);function fr(){var e=Object(p.a)(["\n    height:93vh;\n    display:flex;\n"]);return fr=function(){return e},e}function mr(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n    width:100%;\n    min-height:100vh;\n"]);return mr=function(){return e},e}function hr(){var e=Object(p.a)(["\nmutation($name:String!, $email:String!, $phone:String!, $password:String!) {\n    addNewUser(name:$name, email:$email, phone:$phone, password:$password) {\n      id\n      name\n      email\n      phone\n      verified\n    }\n  }\n"]);return hr=function(){return e},e}var br=Object(_.b)(hr()),vr=g.a.div(mr()),xr=g.a.div(fr()),jr=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={name:"",password:"",checkPassword:"",phone:"",email:""},t.submitButtonClicked=function(){var e=t.state,n=e.name,a=e.email,r=e.password,i=e.checkPassword,o=e.phone,l=t.props.addNewUserMutation;if(""!==n&&""!==a&&""!==r&&""!==i&&""!==o)if(11===o.length)if(r===i){var c={name:n,email:a,password:r,phone:o};console.log("here1"),l({variables:c}).then((function(e){return console.log(e),e.data})).then((function(e){return console.log(e),e.addNewUser})).then((function(e){e.id;window.location.href="/signin"})).catch((function(e){console.error(e.message),alert("Duplicated phone number or email.")})),console.log("here2"),t.setState({name:"",password:"",checkPassword:"",phone:"",email:""})}else alert("Double check your password. ");else alert("Please check your phone number again. ");else alert("Please fill every form.")},t.handleInput=function(e){t.setState(Object(Je.a)({},e.target.name,e.target.value))},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.state,n=e.name,t=e.password,a=e.checkPassword,i=e.phone,o=e.email,l=this.handleInput,c=this.submitButtonClicked;return r.a.createElement(vr,null,r.a.createElement(Fa,null),r.a.createElement(xr,null,r.a.createElement(or,{name:n,password:t,checkPassword:a,phone:i,email:o}),r.a.createElement(gr,{name:n,password:t,checkPassword:a,phone:i,email:o,handleInput:l,submitButtonClicked:c})),r.a.createElement(Ca,null))}}]),n}(r.a.Component),Or=Object(Ln.a)(Object(Sn.a)(br,{name:"addNewUserMutation"}))(jr);function yr(){var e=Object(p.a)(["\n    width: 55%;\n    border: 0;\n    border-bottom: 1px solid black;\n    outline: none;\n    text-align: center;\n    font-size: 13px;\n    padding-bottom: 6px;\n    background: transparent;\n"]);return yr=function(){return e},e}function wr(){var e=Object(p.a)([""]);return wr=function(){return e},e}function kr(){var e=Object(p.a)(["\n    display:flex;\n    width: 60%;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    justify-content:space-between;\n"]);return kr=function(){return e},e}function Ir(){var e=Object(p.a)(["\n    width:50%;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    justify-content:center;\n"]);return Ir=function(){return e},e}var Er=g.a.div(Ir()),$r=g.a.div(kr()),Cr=g.a.div(wr()),Sr=g.a.input.attrs((function(e){return{disabled:!0}}))(yr()),Lr=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.email,t=e.password;return r.a.createElement(Er,null,r.a.createElement($r,null,r.a.createElement(Cr,null,"email:"),r.a.createElement(Sr,{value:n})),r.a.createElement($r,null,r.a.createElement(Cr,null,"password:"),r.a.createElement(Sr,{value:t,type:"password"})))}}]),n}(r.a.Component);function Br(){var e=Object(p.a)(["\n    position: absolute;\n    top: 79%;\n    border: 0;\n    color: white;\n    background: black;\n    border-radius: 3px;\n    padding-left: 15px;\n    padding-right: 15px;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    font-size: 14px;\n    cursor: pointer;\n    z-index:1;\n"]);return Br=function(){return e},e}function Pr(){var e=Object(p.a)(["\n    width: 50%;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 20px;\n    border-radius: 4px;\n    border: 2px solid gainsboro;\n    outline: none;\n    padding-left:10px;\n"]);return Pr=function(){return e},e}function Ar(){var e=Object(p.a)(["\n    width:50%;\n    display:flex;\n    flex-direction:column;\n    justify-content:center;\n    align-items:center;\n    position: relative;\n"]);return Ar=function(){return e},e}var Tr=g.a.div(Ar()),qr=g.a.input(Pr()),Ur=g.a.button(Br()),Dr=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.handleInput,t=e.email,a=e.password,i=e.submitButtonClicked;return r.a.createElement(Tr,null,r.a.createElement(qr,{onChange:n,value:t,placeholder:"e.g) nyaconnected@gmail.com",name:"email"}),r.a.createElement(qr,{onChange:n,type:"password",value:a,placeholder:"e.g) ************",name:"password"}),r.a.createElement(Ur,{onClick:i},"Submit"))}}]),n}(r.a.Component);function zr(){var e=Object(p.a)(["\n    height:93vh;\n    display:flex;\n"]);return zr=function(){return e},e}function Fr(){var e=Object(p.a)(["\n    display:flex;\n    flex-direction:column;\n    width:100%;\n    min-height:100vh;\n"]);return Fr=function(){return e},e}function Mr(){var e=Object(p.a)(["\nmutation($email:String!, $password:String!) {\n    login(email:$email, password:$password){\n      jwt\n    }\n  }\n"]);return Mr=function(){return e},e}var _r=Object(_.b)(Mr()),Rr=g.a.div(Fr()),Nr=g.a.div(zr()),Vr=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={email:"",password:""},t.submitButtonClicked=function(){var e=t.state,n=e.email,a=e.password;(0,t.props.loginMutation)({variables:{email:n,password:a}}).then((function(e){return e.data.login})).then((function(e){console.log(e),"Not verified"===e.jwt?alert("Not verified account"):null===e.jwt?alert("Check your email and password"):(localStorage.setItem("jwt",e.jwt),window.location.href="/")})).catch((function(e){alert(e.message)}))},t.handleInput=function(e){t.setState(Object(Je.a)({},e.target.name,e.target.value))},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.state,n=e.email,t=e.password,a=this.handleInput,i=this.submitButtonClicked;return r.a.createElement(Rr,null,r.a.createElement(Fa,null),r.a.createElement(Nr,null,r.a.createElement(Lr,{email:n,password:t}),r.a.createElement(Dr,{submitButtonClicked:i,handleInput:a,email:n,password:t})),r.a.createElement(Ca,null))}}]),n}(r.a.Component),Gr=Object(Ln.a)(Object(Sn.a)(_r,{name:"loginMutation"}))(Vr);function Kr(){var e=Object(p.a)(["\n    font-size:13px;\n"]);return Kr=function(){return e},e}function Wr(){var e=Object(p.a)(["\n    width: 16%;\n    text-align: center;\n    \n    border: 0;\n    border-bottom: 1px solid black;\n    margin-top: 20px;\n    margin-bottom: 20px;\n    padding-bottom: 10px;\n    font-size: 20px;\n    font-weight: 500;\n    outline: none;\n"]);return Wr=function(){return e},e}function Hr(){var e=Object(p.a)([""]);return Hr=function(){return e},e}function Jr(){var e=Object(p.a)(["\n    height:97vh;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    justify-content:center;\n"]);return Jr=function(){return e},e}function Yr(){var e=Object(p.a)(["\nmutation($userId:String!, $verifyKey:String!) {\n    verifyUser(userId:$userId, verifyKey:$verifyKey) {\n      verified\n      id\n    }\n  }\n"]);return Yr=function(){return e},e}function Xr(){var e=Object(p.a)(["\nmutation($userId:String!) {\n    allocateVerifyKeyToUser(userId:$userId) {\n      id\n      verifyKey\n    }\n  }\n"]);return Xr=function(){return e},e}var Qr=Object(_.b)(Xr()),Zr=Object(_.b)(Yr()),ei=g.a.div(Jr()),ni=g.a.div(Hr()),ti=g.a.input(Wr()),ai=g.a.button(Kr()),ri=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={verifyKey:""},t.handleInput=function(e){t.setState(Object(Je.a)({},e.target.name,e.target.value))},t.submitButtonClicked=function(){(0,t.props.verifyUser)({variables:{userId:t.props.match.params.id,verifyKey:t.state.verifyKey}}).then((function(e){return e.data})).then((function(e){return e.verifyUser})).then((function(e){e.verified?window.location.href="/signin":alert("Fail to verify user. ")})).catch((function(e){alert(e.message)}))},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;(0,this.props.allocateAuthKeyToUser)({variables:{userId:e}}).then((function(e){return e.data})).then((function(e){})).catch((function(e){alert(e.message)}))}},{key:"render",value:function(){var e=this.state.verifyKey,n=this.handleInput,t=this.submitButtonClicked;return r.a.createElement(ei,null,r.a.createElement(ni,null,"We sent you the authentication key by the mobile message."),r.a.createElement(ni,null,"If you can't get message, please contact me, donggyu9410gmail.com"),r.a.createElement(ti,{onChange:n,value:e,name:"verifyKey",placeholder:"e.g) 0629"}),r.a.createElement(ai,{onClick:t},"Submit"))}}]),n}(r.a.Component),ii=Object(m.f)(Object(Ln.a)(Object(Sn.a)(Qr,{name:"allocateAuthKeyToUser"}),Object(Sn.a)(Zr,{name:"verifyUser"}))(ri));function oi(){var e=Object(p.a)([""]);return oi=function(){return e},e}var li=g.a.div(oi()),ci=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(li,null,r.a.createElement(Fa,null),r.a.createElement(ii,null),r.a.createElement(Ca,null))}}]),n}(r.a.Component),ui=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/",exact:!0,component:Xa}),r.a.createElement(m.a,{path:"/signin",exact:!0,component:Gr}),r.a.createElement(m.a,{path:"/signup",exact:!0,component:Or}),r.a.createElement(m.a,{path:"/verify/:id",exact:!0,component:ci}),r.a.createElement(m.a,{component:Xa})))}}]),n}(r.a.Component),si=t(14);function di(){var e=Object(p.a)([""]);return di=function(){return e},e}function pi(){var e=Object(p.a)(["\n  position:absolute;\n  top:5px;\n  left:5px;\n"]);return pi=function(){return e},e}var gi="http://localhost:4000/graphql";gi="https://www.rlog.link:4000/graphql";var fi=new _.a({uri:gi}),mi=(g.a.div(pi()),g.a.div(di()));function hi(e){var n=e.isLoggedIn;return r.a.createElement(mi,null,n?r.a.createElement(Ia,null):r.a.createElement(ui,null))}var bi=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={isLoggedIn:null!==localStorage.getItem("jwt")},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.state.isLoggedIn;return r.a.createElement(si.b,{client:fi},r.a.createElement(hi,{isLoggedIn:e}))}}]),n}(r.a.Component);o.a.render(r.a.createElement(bi,null),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.1a27cd78.chunk.js.map